{% extends 'base.html' %}

{% block body %}

 <section class="py-5 text-center container">
    <div class="row py-lg-5">
      <div class="col-lg-6 col-md-8 mx-auto">
        <h1 class="fw-light">Album example</h1>
        <p class="lead text-muted">Something short and leading about the collection below—its contents, the creator, etc. Make it short and sweet, but not too short so folks don’t simply skip over it entirely.</p>
        <form action="{% url 'app-search-page' %}" method="GET">
          <div class="d-flex justify-content-center">
            <select class="form-select" name="category" required>
              <option>Select Category</option>
              {% for row in categories %}
              <option value="{{ row.id }}" {% if category and category == row %} selected {% endif %}>{{ row.name }}</option>
              {% endfor %}
            </select>
            &nbsp;&nbsp;&nbsp;
            <select class="form-select" name="location" required>
              <option>Select Location</option>
              {% for row in locations %}
              <option value="{{ row }}" {% if location and location == row %} selected {% endif %}>{{ row }}</option>
              {% endfor %}
            </select>
            &nbsp;&nbsp;&nbsp;
            <button class="btn btn-success" type="submit">Search</button>
          </div>
        </form>
      </div>
    </div>
  </section>

  <div class="album py-5 bg-light">
    <div class="container">
      {% for row in business %}
        <div class="d-flex justify-content-center">
          <table class="col-lg-7">
            <tbody>
              <tr>
                <td>
                  <div>
                    <div class="card shadow-sm rounded">
                      <div class="d-flex justify-content-start">
                        <img class="rounded p-2" src="{{ row.thumbnail }}" width="30%" height="150">
                        <div>
                          <h4 class="mt-2">{{ row.name }}</h4>
                          <p class="text-muted">{{ row.address }}</p>
                          <div class="d-flex justify-content-start">
                            <button class="btn btn-success">{{ row.phone }}</button>
                            &nbsp;&nbsp;
                            <button class="btn btn-success">Send Email</button>
                          </div>
                        </div>
                      </div>

                      <div class="card-body">
                        <p class="card-text">{{ row.description }}</p>
                            <table>
                              <tr>
                                <!--
                                <td>
                                  <div class="card bg-light p-2">
                                      <table>
                                        <thead>
                                          <tr>
                                            <th>Our Review</th>
                                            <th></th>
                                          </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                          <td>Google</td>
                                          <td>{{ row.google_rating }} ({{ row.google_reviews_count }})</td>
                                        </tr>
                                        <tr>
                                          <td>Facebook</td>
                                          <td>15 (41)</td>
                                        </tr>
                                        <tr>
                                          <td>Yelp</td>
                                          <td>61 (322)</td>
                                        </tr>
                                        </tbody>
                                      </table>
                                  </div>
                                </td>
                                -->
                                <td>
                                  <div class="card bg-light p-2">
                                    <table>
                                      <thead>
                                        <tr>
                                          <th>Review Sources</th>
                                          <th></th>
                                        </tr>
                                      </thead>
                                      <tbody>
                                      <tr>
                                        <td>Google</td>
                                        <td>{{ row.google_rating }} ({{ row.google_reviews_count }})</td>
                                      </tr>
                                      <tr>
                                        <td>Facebook</td>
                                        <td>15 (41)</td>
                                      </tr>
                                      <tr>
                                        <td>Yelp</td>
                                        <td>61 (322)</td>
                                      </tr>
                                      </tbody>
                                    </table>
                                  </div>
                                </td>
                              </tr>
                            </table>

                          <!--
                          <small class="text-muted">9 mins</small>
                          -->
                      </div>
                    </div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      {% endfor %}
    </div>
    <div class="d-flex justify-content-center">
      <div class="pagination">
          <span class="step-links">
              {% if business.has_previous %}
                  <a href="?category={{ row.category.id }}&location={{ location }}&page=1">&laquo; first</a>
                  <a href="?category={{ row.category.id }}&location={{ location }}&page={{ business.previous_page_number }}">previous</a>
              {% endif %}

              <span class="current">
                  Page {{ business.number }} of {{ business.paginator.num_pages }}.
              </span>

              {% if business.has_next %}
                  <a href="?category={{ category.id }}&location={{ location }}&page={{ business.next_page_number }}">next</a>
                  <a href="?category={{ category.id }}&location={{ location }}&page={{ business.paginator.num_pages }}">last &raquo;</a>
              {% endif %}
          </span>
      </div>
    </div>
  </div>


{% endblock %}